\documentclass{apa6}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{xparse}
\usepackage{adjustbox}

\input{./corner_metadata.tex}

\NewDocumentCommand{\framedbox}{ O{} m }{%

  \begin{tikzpicture}
    \pgfkeys{/framedbox/.cd, #1} % Set the keys based on the optional argument

    \coordinate (northwest) at (0, \fbheight);
    \coordinate (northeast) at (\fbwidth, \fbheight);
    \coordinate (southwest) at (0, 0);
    \coordinate (southeast) at (\fbwidth, 0);

    \def\nwcorner{\fbcorner}
    \def\necorner{\fbcorner}
    \def\swcorner{\fbcorner}
    \def\secorner{\fbcorner}

    \def\offsetx{\fbcornersize * \getcornermeta{\fbcorner}{offsetx} /
        \getcornermeta{\fbcorner}{width}}
    \def\offsety{\fbcornersize * \getcornermeta{\fbcorner}{offsety} /
        \getcornermeta{\fbcorner}{width}}
    \def\extrax{\fbcornersize * \getcornermeta{\fbcorner}{extrax} /
        \getcornermeta{\fbcorner}{width}}
    \def\extray{\fbcornersize * \getcornermeta{\fbcorner}{extray} /
        \getcornermeta{\fbcorner}{width}}

    \node[anchor=north west, inner sep=0pt]
    (cornernorthwest) at (northwest)
         {\includegraphics[width=\fbcornersize, height=\fbcornersize]{\nwcorner}};
    \node[anchor=north east, inner sep=0pt]
    (cornernortheast) at (northeast)
         {\adjustbox{scale={-1}{1}}{\includegraphics[width=\fbcornersize, height=\fbcornersize]{\necorner}}};
    \node[anchor=south west, inner sep=0pt]
    (cornersouthwest)at (southwest)
         {\adjustbox{scale={1}{-1}}{\includegraphics[width=\fbcornersize, height=\fbcornersize]{\swcorner}}};
    \node[anchor=south east, inner sep=0pt]
    (cornersoutheast)at (southeast)
         {\adjustbox{scale={-1}{-1}}{\includegraphics[width=\fbcornersize, height=\fbcornersize]{\secorner}}};

    \def\linetopthickness{\fbcornersize * \getcornermeta{\fbcorner}{linetopthickness} /
        \getcornermeta{\fbcorner}{width}}
    \def\lineleftthickness{\fbcornersize * \getcornermeta{\fbcorner}{lineleftthickness} /
        \getcornermeta{\fbcorner}{width}}

    \draw[line width={\linetopthickness}] ([yshift={- \offsety -
        \linetopthickness}, xshift={- \extrax}] cornernorthwest.north east) --
    ([yshift={- \offsety - \linetopthickness}, xshift={\extrax}] cornernortheast.north west);

    \draw[line width={\linetopthickness}] ([yshift={\offsety +
        \linetopthickness}, xshift={- \extrax}] cornersouthwest.south east) --
    ([yshift={\offsety + \linetopthickness}, xshift={\extrax}] cornersoutheast.south west);

    \draw[line width={\linetopthickness}] ([yshift={\extray}, xshift={\offsetx
        + \lineleftthickness}] cornernorthwest.south west) --
    ([yshift={- \extray}, xshift={\offsetx + \lineleftthickness}] cornersouthwest.north west);

    \draw[line width={\linetopthickness}] ([yshift={\extray}, xshift={- \offsetx
        - \lineleftthickness}] cornernortheast.south east) --
    ([yshift={- \extray}, xshift={- \offsetx - \lineleftthickness}] cornersoutheast.north east);

    \node (content) at (\fbwidth/2, \fbheight/2) {\parbox{\fbwidth}{\centering #2}};
  \end{tikzpicture}
}

\pgfkeys{/framedbox/.cd,
  width/.store in=\fbwidth,
  width=5cm, % Default width
  height/.store in=\fbheight,
  height=4cm, % Default height
  cornersize/.store in=\fbcornersize,
  cornersize=0.5cm,
  corner/.store in=\fbcorner,
  corner=corner
}

\begin{document}

\framedbox[width=6cm, height=4cm, cornersize=1cm]{This is some sample content within the box.}

\end{document}
